# 全局对象与模块化

## 全局对象

Node中给我们提供了一些全局对象，方便我们进行一些操作：

[global 全局变量 | Node.js API 文档 (nodejs.cn)](http://nodejs.cn/api/globals.html)

### 特殊的全局对象

这些全局对象可以在模块中任意使用，但是在命令行交互中是不可以使用的；

包括：`__dirname、__filename、exports、module、require()`

`__dirname`：获取当前文件所在的路径，不包括后面的文件名

`__filename`：获取当前文件所在的路径和文件名称，包括后面的文件名称

没有模块化可以用立即执行函数来实现

### 常见的全局对象

1. process对象：process提供了Node进程中相关的信息，比如Node的运行环境、参数信息等；
2. console对象：提供了简单的调试控制台
3. 定时器函数：在Node中使用定时器有好几种方式：
   - `setTimeout(callback, delay[, ...args])`：`callback`在delay毫秒后执行一次；
   - `setImmediate(callback[, ...args])`：`callback` I / O事件后的回调的“立即”执行；
   - `process.nextTick(callback[, ...args])`：添加到下一次tick队列中；

### global

global是一个全局对象，事实上前端我们提到的process、console、`setTimeout`等都有被放到global中；就好比浏览器中的window，this；

但是 `var` 一个全局变量，可以隐式的成为window的属性，但是不会成为global的属性





## 模块化

### 什么是模块化开发呢？

- 模块化开发最终的目的是将程序划分成一个个小的结构；
- 这个结构中编写属于自己的逻辑代码，有自己的作用域，不会影响到其他的结构；
- 这个结构可以将自己希望暴露的变量、函数、对象等导出给其结构使用
- 也可以通过某种方式，导入另外结构中的变量、函数、对象等；

这个结构就是模块，按照这种结构划分开发程序的过程，就是模块化开发的过程



### 没有模块化的问题

早期没有模块化带来了很多的问题：比如命名冲突的问题

```js
// a.js
var a = "abc"
// b.js
var a = "阿伯茨"
// c.js
var a = "123"

// index.html 引入三个文件 
console.log(a)// ????
```

我们有办法可以解决上面的问题：**立即函数调用表达式（IIFE）**；但这治标不治本，所有的代码包裹在一个匿名函数中来写会导致这样的代码混乱不堪



### `CommonJS`