# é¢è¯•é¢˜æ€»ç»“

## å‡½æ•°

### å‡½æ•°è¡¨è¾¾å¼

```js
// (function b() {}) ä¼šè¢«å½“æˆä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»è€Œæ²¡æœ‰å‡½æ•°å
var a = 10;
if (function b() {}) {
  //()è¡¨è¾¾å¼ï¼Œå¿½ç•¥å‡½æ•°å
  a += typeof b;
}

console.log(a); // '10undefined'
```

### å‡½æ•°å£°æ˜

```js
var x = 1,
  y = z = 0;

function add(n) {
  return (n = n + 1);
}

y = add(x);

function add(n) {
  return (n = n + 3);
}

z = add(x);

console.log(x, y, z); // 1, 4, 4
```

### é—­åŒ…

```js
function Test(a, b, c) {
  var d = 1;
  this.a = a;
  this.b = b;
  this.c = c;
  this.f = function () {
    d++;
    console.log(d);
  };
}

var test1 = new Test();
var test2 = new Test();
test1.f(); // 2
test1.f(); // 3
test2.f(); // 2
```

### åŒ…è£…ç±»

```js
var name = "hello";
name += 10;

var type = typeof name;

if (type.length === 6) {
  // new String(type)
  // type.text = 'string'
  // delete
  type.text = "string";
}

console.log(type.text); // undefined
```

### ç«‹å³æ‰§è¡Œå‡½æ•°

#### 1ï¼šç«‹å³æ‰§è¡Œå‡½æ•°çš„ä¸æ‰§è¡Œ

```js
function foo1(x) {
  console.log(arguments);
  return x;
}

foo(1, 2, 3, 4, 5); // 1,2,3,4,5

function foo2(x) {
  console.log(arguments);
  return x;
}(1, 2, 3, 4, 5); // ä¸ä¼šæ‰§è¡Œ (1, 2, 3, 4, 5)æ˜¯è¡¨è¾¾å¼

(function foo3(x) {
  console.log(arguments);
  return x;
})(1, 2, 3, 4, 5); // 1,2,3,4,5
```

#### 2ï¼šç«‹å³æ‰§è¡Œå‡½æ•°çš„è¿”å›ä¸å¦

```js
// ä¸è¿”å›
+function test() {
  var a = 1;
  function add() {
    a++;
    console.log(a);
  }
  window.add = add;
}()
add();
add();
add();

// è¿”å›
var add = +function test() {
  var a = 1;
  function add() {
    a++;
    console.log(a);
  }
  return add
}()
add()
```

### arguments

æ˜ å°„å…³ç³»

```js
function b(x, y, a) {
  arguments[2] = 10;
  console.log(a); // 10
}

b(1, 2, 3);
```

### this

```js
/**
 * GO = {
 * name: undefined -> '222'
 * a: undefined -> {
 *    name: '111',
 *    say: function () {
 *        console.log(this.name)
 * }
 * }
 * fun: undefined -> function () {...}
 * b: undefined -> {
 *  name: '333',
 *  say: function (fun) {...}
 * }
 * }
 */
var name = '222';
var a = {
  name: '111',
  say: function () {
    console.log(this.name);
  }
}

var fun = a.say;
fun(); // '222'
a.say(); // '111'
var b = {
  name: '333',
  say: function (fun) {
    fun();
  }
}
b.say(a.say); // '222'
b.say = a.say;
b.say(); // '333'
```



```js
/**
 * AO = {
 * marty: undefined -> {
    name: 'marty',
    printName: function () {
      console.log(this.name);
    }
 * test1: undefined -> {
    name: 'test1'
  }
 * test2: undefined -> {
    name: 'test2'
  }
 }
 * test3: undefined -> {
    name: 'test3',
    printName: function () {
      console.log(this.name);
    }
  }
 * }
 */
function test() {
  var marty = {
    name: 'marty',
    printName: function () {
      console.log(this.name);
    }
  }

  var test1 = {
    name: 'test1'
  }
  var test2 = {
    name: 'test2'
  }
  var test3 = {
    name: 'test3'
  }

  test3.printName = marty.printName;
  marty.printName.call(test1); // 'test1'
  marty.printName.apply(test2); // 'test2'
  marty.printName(); // 'marty'
  test3.printName(); // 'test3'
}

test();
```

#### ğŸŒ éš¾é¢˜

```js
function Foo() {
  getName = function () {
    console.log(1);
  }
  return this;
}

Foo.getName = function () {
  console.log(2);
}
Foo.prototype.getName = function () {
  console.log(3);
}
var getName = function () {
  console.log(4);                                                                                                                                                                                                                          
}
function getName() {
  console.log(5);
}
console.dir(Foo);

Foo.getName(); // 2
getName(); // 4
Foo().getName(); // 1
getName(); // 1
new Foo.getName(); // 2
new Foo().getName(); // 3
new new Foo().getName(); // 3

/**
 * è§£é‡Š
 * 1ï¼šFoo.getName(); // 2
 *    Fooæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä½†ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹è±¡å°±æœ‰å±æ€§ï¼›æ‰€ä»¥æ‰“å° 2 æ²¡é—®é¢˜ï¼›å¯ä»¥é€šè¿‡diræ‰“å°çŸ¥é“getNameå±æ€§
 * 
 * 2ï¼šgetName(); // 4
 *    å‡½æ•°å£°æ˜æ˜¯æ•´ä½“æå‡ï¼Œå˜é‡å£°æ˜åªæå‡å˜é‡ä¸æå‡èµ‹å€¼
 * 
 * 3ï¼šFoo().getName(); // 1    getName(); // 1
 *    å‡½æ•°è°ƒç”¨ä»å·¦åˆ°å³ï¼›å…ˆæ‰§è¡ŒFoo()ï¼Œå› ä¸ºFooæ„é€ å‡½æ•°ä¸­çš„getNameæ–¹æ³•æ²¡å£°æ˜ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¼šå‡çº§ä¸ºå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ‰“å° 1ï¼›åé¢çš„getName() ä¹Ÿå°±æ‰“å° 1
 * 
 * 4ï¼šnew Foo.getName(); // 2    new Foo().getName(); // 3
 *    1ï¼š new çš„ä¸¤ç§ç”¨æ³•
 *        new æœ‰å‚åˆ—è¡¨  new Foo()ï¼›æœ‰å‚æ•°åˆ—è¡¨æƒ…å†µ  18çº§
 *        new æ— å‚åˆ—è¡¨  new Fooï¼›æ— å‚æ•°åˆ—è¡¨æƒ…å†µ  17çº§
 * 
 *    æˆå‘˜è®¿é—®è¿ç®—ç¬¦ï¼ˆ.ï¼‰ä¼˜å…ˆçº§ä¸º 18 çº§ï¼Œå’Œ new Foo() åŒçº§ï¼›å¯¹äºåŒçº§è¿ç®—ç¬¦ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡è®¡ç®—ï¼›
 *    æ‰€ä»¥å…ˆæ‰§è¡Œ new Foo() è¿”å›ä¸€ä¸ª Foo çš„å¯¹è±¡ ï¼Œå¯¹ Foo å¯¹è±¡è°ƒç”¨ getName æ—¶æŸ¥æ‰¾å¼•ç”¨é“¾ï¼Œå¾—åˆ° Foo.prototype.getName
 * 
 *    new Foo ç»“åˆè¢«åˆ¤å®šä¸ºæ— å‚æ•°åˆ—è¡¨çš„newï¼Œä¼˜å…ˆçº§ä½äºæˆå‘˜è®¿é—®ï¼Œ
 *    æ‰€ä»¥å…ˆæ‰§è¡Œæˆå‘˜è®¿é—®å¾—åˆ° Foo çš„å±æ€§ getNameï¼Œ ç„¶å Foo.getName å’Œ new ç»“åˆï¼Œæ‰§è¡Œå¸¦å‚æ•°åˆ—è¡¨çš„ new è¿ç®—
 * 
 * 5ï¼šnew new Foo().getName()
 *    å…ˆæ‰§è¡Œnew Foo()ï¼Œåœ¨æ‰§è¡Œ(new Foo().getName())ï¼›æœ€åæ‰§è¡Œ new(new Foo().getName())
 */


```



## è¡¨è¾¾å¼

### é€—å·è¡¨è¾¾å¼

```js
var f = (
  function f() {
    return '1';
  },
  function g() {
    return 2;
  }
)();
// f æ˜¯ä¸€ä¸ªé€—å·è¡¨è¾¾å¼
console.log(typeof(f)); // 'number'
```



## å»é‡

### æ•°ç»„å»é‡

```js
Array.prototype.unipue = function(){
  var newArr = [],
      newObj = {};

  for (let index = 0; index < this.length; index++) {
      // ä¸è¦å†™ this.index
    if(!newObj.hasOwnProperty(this[index])){
      newObj[this[index]] = this[index]
      newArr.push(this[index])
    }
  }
  return newArr
}

var arr = [1, 1, 2, 2, 3, 4, 6, 3, 6, 'a', 'a'];
console.log(arr.unipue());
```

### å­—ç¬¦ä¸²å»é‡

```js
String.prototype.unique = function() {
  var temp = {},
      newStr = '';

      for (var i = 0; i < this.length; i++) {
        if (!temp.hasOwnProperty(this[i])) {
          temp[this[i]] = this[i];
          newStr += this[i];
        }
      }

      return newStr;
}

var str = '111222000aabb';
console.log(str.unique());
```

