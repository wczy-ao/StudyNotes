[TOC]

#### 1：v-model原理

`v-model` 指令在表单 `<input>`、`<textarea>` 及 `<select>` 元素上创建双向数据绑定。它会根据控件类型自动选取正确的方法来更新元素。

- `text` 和 `textarea` 元素使用 `value` property 和 `input` 事件；
- `checkbox` 和 `radio` 使用 `checked` property 和 `change` 事件；
- `select` 字段将 `value` 作为 prop 并将 `change` 作为事件。

```vue
<template>
  <div id="app">
    <input type="text" :value="message" @input="changeValue">{{message}}
    <input type="text" v-model="message">{{message}}
  </div>
</template>

<script>
export default {
  name: 'App',
  data() {
    return {
      message: "hello world"
    }
  },
  methods: {
      changeValue(event){
        console.log("值改变了");
        this.message = event.target.value
      }
    }
}
</script>
```

##### **在组件上使用 `v-model`**

[文档地址](https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model)

需要注意的是：照着文档写会报错

```
error:
You are using the runtime-only build of Vue where the template compiler is not available
```

`vue`有两种形式的代码 分别是`compiler`（模板）模式和`runtime`模式（运行时），`vue`模块的`package.json`的`main`字段默认为`runtime`模式， 指向了`"dist/vue.runtime.common.js"`位置
 在`main.js`文件中，初始化`vue`是`compiler`模式的，因此出现上面的报错信息。

**解决方案：**

```js
// vue.config.js
module.exports = {
  runtimeCompiler: true,
};

```



#### 2：挂在el的两种写法

```js
const v = new Vue({
  //el:'#root', //第一种写法
  data: {
    name: "尚硅谷",
  },
});
v.$mount("#root"); //第二种写法
```

#### 3：MVVM

![image.png](框架.assets/1630399244722-9271c23d-0295-46c8-b444-640dec90b834.png)

1. M：模型(Model) ：数据层

2. V：视图(View) ：在前端开发中通常是DOM层，主要给用户展示各种信息

3. VM：视图模型层，是view&model沟通的桥梁。一方面实现了Directives（数据绑定），将Model的改变实时反应到View中，另一方面实现了Dom Listener（DOM监听），当DOM发生一些事件（点击、滚动、touch等），可以监听到并在需要的情况下改变对应的Data

 **观察发现：**

- .data中所有的属性，最后都出现在了vm身上。

- vm身上所有的属性 及 Vue原型上所有属性，在Vue模板中都可以直接使用。



#### 4：computed与watch

**计算属性是基于它们的响应式依赖进行缓存的**。只在相关响应式依赖发生改变时它们才会重新求值。相比之下，每当触发重新渲染时，调用方法将**总会**再次执行函数。遍历一个巨大的数组并做大量的计算。然后我们可能有其他的计算属性依赖于 **A**。如果没有缓存，我们将不可避免的多次执行 **A** 的 getter！

#### 5：render函数

#### 6：v-if与v-for 一起用

[v-if与v-for 一起用](https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%BF%85%E8%A6%81)

当 Vue 处理指令时，`v-for` 比 `v-if` 具有更高的优先级

```html
<ul>
  <li
    v-for="user in users"
    v-if="user.isActive"
    :key="user.id"
  >
    {{ user.name }}
  </li>
</ul>
```

将会经过如下运算：

```js
// 因此哪怕我们只渲染出一小部分用户的元素，也得在每次重渲染的时候遍历整个列表，不论活跃用户是否发生了变化。
this.users.map(function (user) {
  if (user.isActive) {
    return user.name
  }
})
```

#### 7：v-for遍历对象

```
在遍历对象时，会按 Object.keys() 的结果遍历，但是不能保证它的结果在不同的 JavaScript 引擎下都一致。
```

```html
<div v-for="(value, name, index) in object">
  {{ index }}. {{ name }}: {{ value }}
</div>
```

#### 8：vue为什么不能检测数组和对象的变化

##### 对象：

就对象而言，不能检测变化的原因是在实例时没有这个属性，如果有的话是可以检测的

```vue
<template>
  <div id="app">
    <span>obj.a:{{obj.a}}</span>
    <br>
    <span>obj.b:{{obj.b}}</span>  <!-- 点击无效果 -->
    <button @click="change">点击</button>
  </div>
</template>

<script>
export default {
  name: 'App',
  data() {
    return {
      obj:{
        a:22
      },
    }
  },
  methods: {
      change() {
        this.obj.b = 333
      }
    }
}
</script>
```

##### 数组：

数组有两种情况检测不到

1. 利用索引直接设置一个数组项时
2. 修改数组的长度时

```vue
<template>
  <div id="app">
    <ul>
      <li v-for="(litem, index) in items" :key="index">{{litem}}</li>
    </ul>
  </div>
</template>

<script>
export default {
  name: 'App',
  data() {
    return {
      items: ['a', 'b', 'c']
    }
  },
  methods: {
      change() {
          // 以下两种操作没有响应式的
         this.items[1] = 'sss'
         this.items.length = 4
         console.log(this.items);
      }
    }
}
</script>
```



#### 9：DOM模板解析

有些 HTML 元素，诸如 `<ul>`、`<ol>`、`<table>` 和 `<select>`，对于哪些元素可以出现在其内部是有严格限制的。而有些元素，诸如 `<li>`、`<tr>` 和 `<option>`，只能出现在其它某些特定的元素内部。

```html
<table>
  <blog-post-row></blog-post-row>
</table>
```

这个自定义组件 `<blog-post-row>` 会被作为无效的内容提升到外部，并导致最终渲染结果出错。

**is 属性**

```html
<table>
  <tr is="blog-post-row"></tr>
</table>
```

需要注意的是**如果我们从以下来源使用模板的话，这条限制是\*不存在\*的**：

- 字符串 (例如：`template: '...'`)
- [单文件组件 (`.vue`)](https://cn.vuejs.org/v2/guide/single-file-components.html)
- [`<script type="text/x-template"></script>`](https://cn.vuejs.org/v2/guide/components-edge-cases.html#X-Templates)