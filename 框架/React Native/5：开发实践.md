# 开发实践

## props.chiildren

类似于`Vue`中的插槽作用，组件包裹的内容会放在组件`props`的`children`属性中

```js
const StartGameScreen = () => {
  return (
    <View>
      <TextInput />
      <PrimaryButton style={{color:"red"}}>Reset</PrimaryButton>
      <PrimaryButton>Confirm</PrimaryButton>
    </View>
  );
};

function PrimaryButton(props) {
  console.log(props);
  return (
    <View>
      <Text style={{...props.style}}>{props.children}</Text>
    </View>
  );
}
```





## TextInput

```js
import { StyleSheet, View, TextInput } from "react-native";

/*
keyboardType:键盘类型--数字键盘、拼音;
maxLength:位数
onChangeText：键盘事件，text为输入值
*/
<TextInput
 style={styles.numberInput}
 keyboardType="phone-pad"
 autoCapitalize="none"
 autoCorrect={false}
 maxLength={2}
 onChangeText={(text) => onChangeText(text)}
/>
```





## Pressable

`onPress` 提供一个按压事件、`style`可以接受一个函数来添加样式，`preesed`为`true`或者`false`，按下去就是`true`、`android_ripple`针对于安卓按压的动画效果

```js
import { View, Text, Pressable, StyleSheet } from 'react-native';

<View style={styles.buttonOuterContainer}>
   <Pressable
      style={({ pressed }) =>
        pressed
        ? [styles.buttonInnerContainer, styles.pressed]
        : styles.buttonInnerContainer
      }
      onPress={pressHandler}
      android_ripple={{ color: '#640233' }}
   >
     <Text style={styles.buttonText}>{children}</Text>
  </Pressable>
</View>
```



## LinearGradient

提供渐变颜色 https://docs.expo.dev/versions/latest/sdk/linear-gradient/

```
npx expo install expo-linear-gradient
```

```js
import { LinearGradient } from "expo-linear-gradient";
export default function App() {
  return (
    <LinearGradient colors={['#4e0329', '#ddb52f']} style={styles.rootScreen}>
      <StartGameScreen />
    </LinearGradient>
  );
}

```





## ImageBackground

为`page`背景添加图片

```js
import { StyleSheet, ImageBackground, Text, View } from "react-native";

import { LinearGradient } from "expo-linear-gradient";
export default function App() {
  return (
    <LinearGradient colors={['#4e0329', '#ddb52f']} style={styles.rootScreen}>
    <ImageBackground
        source={require("./assets/icon.png")}
        resizeMode="cover"
        style={styles.rootScreen}
        imageStyle={styles.backgroundImage}
      >
      <StartGameScreen />
    </ImageBackground>
	</LinearGradient>
  );
}

```



## Alert

`alert`可以提供`modal`效果，有三个参数分别是标题，内容，按钮以及事件

```js
import React, { useState } from "react";
import { StyleSheet, View, TextInput, Alert } from "react-native";

  const onConfirm = () => {
    const num = +inpNum;
    if (isNaN(num) || num <= 0 || num > 99) {
      Alert.alert(
        "猜错了，超出范围了",
        "Number has to be a number between 1 and 99.",
        [{ text: "确认", style: "destructive", onPress: onReset }]
      );
    }
    return;
  };
  

```



## SafeAreaView

`SafeAreaView`的目的是在一个“安全”的可视区域内渲染内容。具体来说就是因为目前有 iPhone X 这样的带有“刘海”的全面屏设备，所以需要避免内容渲染到不可见的“刘海”范围内。本组件目前仅支持 iOS 设备以及 iOS 11 或更高版本。

```js
import React from 'react';
import { StyleSheet, Text, SafeAreaView } from 'react-native';

const App = () => {
  return (
    <SafeAreaView style={styles.container}>
      <Text>Page content</Text>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
});

export default App;
```



## Font

官方地址：[expo-font](https://docs.expo.dev/versions/latest/sdk/font/)

使用如下

```
npx expo install expo-font
```

```js
import { useFonts } from 'expo-font';

const [fontsLoaded] = useFonts({
  'open-sans': require('./assets/fonts/OpenSans-Regular.ttf'),
  'open-sans-bold': require('./assets/fonts/OpenSans-Bold.ttf'),
});
```

```js
buttonText: {
  color: 'white',
  textAlign: 'center',
  fontFamily: 'open-sans-bold'
},
```



## 图标 icon

[官方地址](https://docs.expo.dev/guides/icons/#expovector-icons)

无需安装新的库，可以直接用

具体的icon在 [这里](https://icons.expo.fyi/)

```jsx
import { AntDesign } from "@expo/vector-icons";


<AntDesign name="stepforward" size={24} color="black" />

```



## Image

原生模块，用来展示图片

[官方地址](https://reactnative.cn/docs/next/image#testid)

需要注意resizeMode属性

```jsx
<View style={styles.imageContainer}>
<Image
  resizeMode="contain"
  fadeDuration={1300}
  style={styles.image}
//source={require('./assets/images/background.png')}
  source={{
    uri: "https://doc.houdunren.com/assets/img/logo.b46834f8.png",
  }}
/>
</View>
```





## TouchableOpacity

[直接看文档，按下去透明度降低](https://reactnative.cn/docs/touchableopacity#style)

## UI库

https://reactnativepaper.com/





## Dimension & useWindowDimensions

[Dimension官方地址](https://reactnative.cn/docs/next/dimensions#%E6%96%B9%E6%B3%95)

[useWindowDimensions官方地址](https://reactnative.cn/docs/next/usewindowdimensions)



推荐使用 useWindowDimensions但该版本尚未发行，两个api都是一样的作用，会在屏幕尺寸变化时自动更新获取到的设备`width`和`height`值

```js
import { useWindowDimensions,Dimension } from 'react-native';
const windowWidth = useWindowDimensions().width;
const windowHeight = useWindowDimensions().height;

const windowWidth = Dimensions.get('window').width;
const windowHeight = Dimensions.get('window').height;

const deviceWidth = Dimensions.get('window').width;

imageContainer: {
  width: deviceWidth < 440 ? 150 : 300,
  height: deviceWidth < 440 ? 150 : 300,
  borderRadius: deviceWidth < 440 ? 75 : 150,
  borderWidth: 3,
  borderColor: Colors.primary800,
  overflow: 'hidden',
  margin: 36,
},
```



监听屏幕旋转，useWindowDimensions不需要，内部已经监听了；Dimensions需要监听旋转事件

```js
useEffect(() => {
  Dimensions.addEventListener("change",()=>{
    console.log(1)
  })
}, [])


```



## KeyboardAvoidingView

[官方文档](https://reactnative.cn/docs/keyboardavoidingview#behavior)

本组件用于解决一个常见的尴尬问题：手机上弹出的键盘常常会挡住当前的视图。本组件可以自动根据键盘的高度，调整自身的 height 或底部的 padding，以避免被遮挡。



```
<KeyboardAvoidingView style={styles.screen} behavior="position" keyboardVerticalOffset={100}>
</KeyboardAvoidingView>
```



## expo-screen-orientation

[官方文档](https://docs.expo.dev/versions/latest/sdk/screen-orientation/#configuration-in-appjsonappconfigjs)

屏幕旋转库



## Platform

[官方文档](https://reactnative.cn/docs/platform#constants)

用来获取当前平台系统是安卓还是ios

```js
import { Platform, StyleSheet } from 'react-native';

// 获取当前操作系统名称
console.log(Platform.OS); // enum('android', 'ios')
```

